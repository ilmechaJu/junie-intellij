# bench

이 디렉토리는 마이크로벤치마크와 결과(재현 가능한 형태)를 포함합니다.

구성
- `algo-bench.js`: 상위 K 빈도 요소(Top-K) 문제를 예시로, 순진한 정렬 기반 접근 vs. 버킷 기반 최적화를 비교합니다.
- `results/`: 실행 결과 JSON이 자동 저장됩니다.

사전 준비
- Node.js 16+ 권장 (LTS). 메모리 측정을 안정화하려면 `--expose-gc` 사용.

실행 예시 (PowerShell)
```
node --expose-gc .\bench\algo-bench.js --n=200000 --k=25 --it=30
```
옵션
- `--n`: 데이터 크기 (기본 100000)
- `--k`: 상위 K (기본 10)
- `--it`: 각 알고리즘 반복 횟수 (기본 20)

출력
- 콘솔 요약: p95/p99, 평균, 피크 RSS(MB) 및 개선율(%)
- 파일: `bench/results/result-<timestamp>.json` 으로 상세 결과 저장

p95/p99 해석
- p95: 전체 샘플 중 상위 5%를 제외한 95번째 분위값
- p99: 상위 1%를 제외
- 목표: `README.md` 체크리스트의 "p95/p99 레이턴시 개선" 달성 여부 확인

메모리 피크
- 실행 중 관측된 `RSS` 최대값(MB). 최적화 전후 감소가 목표.

재현성 체크리스트
- 동일한 파라미터로 3회 이상 반복하여 분산 확인
- 노이즈 요인(백그라운드 앱, 터보부스트 등) 최소화
- Node 버전, OS, 파라미터를 결과 JSON의 `meta`로 함께 보관


---

## 트러블슈팅 및 팁
- `global.gc is not a function` 오류가 보이면 `--expose-gc` 옵션을 붙여 다시 실행하세요.
  - 예) `node --expose-gc .\bench\algo-bench.js --n=200000 --k=25 --it=30`
- 경로 기준 안내: 본 문서의 경로 예시는 `cd task08` 상태를 기준으로 합니다. 저장소 루트에서 실행한다면 경로 앞에 `task08\`를 붙여 사용하세요.
