# 마이그레이션: <ID or Version>

## 개요
- 목적: 어떤 변경을 위한 마이그레이션인가?
- 범위: 스키마/데이터/코드/인프라
- 영향 요약: 다운타임/무중단 여부, 위험도, 롤백 난이도
- 이해관계자: 오너/승인자/실행자

## 사전 조건
- 백업/스냅샷 계획, 리드 레플리카 상태, 트래픽 윈도우
- 릴리즈 순서: DB → 앱 → 워커(또는 반대) 등
- 용량/성능 검증(샘플 데이터/리허설)

## 실행 단계
1. 준비(Feature flag, 스키마 버전 태깅, 백필 전략 수립)
2. 스키마 변경(Forward-compatible 우선, Non-blocking)
3. 데이터 백필(배치/점진, 재시도/중단/재개 전략)
4. 애플리케이션 릴리즈(읽기→쓰기 순, 점진 전환/카나리)
5. 검증 및 모니터링(p50/p95, 오류율, 큐 적체)
6. 클린업(구 스키마/코드 제거, 플래그 제거)

## 롤백 계획
- 트리거 조건과 최대 허용 시간
- 되돌리기 단계(DB 스키마, 앱 버전, 데이터 복구)
- 데이터 무결성 검사/보정 절차

## 검증/관측성
- 성공 기준: <예: 에러율 < 1%, p95 < 300ms>
- 대시보드/알림 규칙: <지표, 임계값>
- 실행 로그/결과 캡처 위치

## 위험/완화
- 위험 목록과 완화책(락 경합, 긴 트랜잭션, 인덱스 빌드 비용 등)
- 테스트 계획: 샌드박스/리허설/드라이런

## 체크리스트
- [ ] 백업/리허설 완료
- [ ] Feature flag 배포
- [ ] 스키마 변경 적용(Non-blocking)
- [ ] 백필 진행/완료
- [ ] 관측성 지표 정상
- [ ] 클린업 완료
